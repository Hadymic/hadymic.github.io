<% if(theme.fun_features.typing.enable){ %>
  <%- js_ex(theme.static_prefix.typed, "/typed.min.js") %>
  <script>
    if (<%- theme.index.slogan.hitokoto %> && "<%- data.subtitle %>" == "") {
      fetch('https://v1.hitokoto.cn')
          .then(response => response.json())
          .then(data => {
            var typed = new Typed('#subtitle', {
              strings: [
                '  ',
                data.hitokoto + "&nbsp;",
              ],
              cursorChar: "<%- theme.fun_features.typing.cursorChar %>",
              typeSpeed: <%- theme.fun_features.typing.typeSpeed %>,
              loop: <%- theme.fun_features.typing.loop %>,
            });
            typed.stop();
            $(document).ready(function () {
              $(".typed-cursor").addClass("h2");
              typed.start();
            });
          })
            .catch(console.error)
    } else {
      var typed = new Typed('#subtitle', {
        strings: [
          '  ',
          "<%- data.subtitle %>&nbsp;",
        ],
        cursorChar: "<%- theme.fun_features.typing.cursorChar %>",
        typeSpeed: <%- theme.fun_features.typing.typeSpeed %>,
        loop: <%- theme.fun_features.typing.loop %>,
      });
      typed.stop();
      $(document).ready(function () {
        $(".typed-cursor").addClass("h2");
        typed.start();
      });
    }
  </script>
<% } %>
